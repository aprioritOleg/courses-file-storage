use tempdb;
declare @tableCreation nvarchar(20);
set @tableCreation = 'apriorit';

begin tran @tableCreation
begin try

create table [Phones]
(
id int not null identity primary key,
number nvarchar(MAX) not null,
title nvarchar(MAX) not null
)
create table [Address]
(
id int not null identity primary key,
Country nvarchar(MAX) not null,
City nvarchar(MAX) not null,
Street nvarchar(MAX) not null,
HomeNumber nvarchar(MAX) not null,
[Type] nvarchar(MAX) not null
)
create table Firm
(
id int not null identity primary key,
Title nvarchar(MAX),
Address_id int not null foreign key references [Address](id)
)

create table Humans
(
id int not null identity primary key,
[FirstName] nvarchar(MAX) not null,
[LastName] nvarchar(MAX) not null,
[BirthDay] date not null,
HomeAddress_id int not null foreign key references [Address](id),
WorkAddress_id int not null foreign key references [Address](id),
Firm_id int not null foreign key references Firm(id)
)
create table HumansPhones
(
id int not null identity primary key,
Human_id int not null foreign key references Humans(id),
Phone_id int not null foreign key references Phones(id)
)


commit tran @tableCreation
end try
begin catch
rollback tran @tableCreation
print 'error'
end catch